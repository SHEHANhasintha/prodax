<div class="chat-room">




<div>

<div id="videos" style="margin-top: 20px;">
  <video class="video-player" id="user-1" autoplay playsinline></video>
  <!-- <video class="video-player" id="user-2" autoplay playsinline></video> -->
</div>

<div class="step">
  <p><strong>Room Id : </strong>{{roomId}}</p>
  <p><strong>Room Url : </strong><a href="{{currentLocation}}">{{currentLocation}}</a></p>
</div>

<div class="step">
  <p><strong>Step 1:</strong> User 1,  click "Create offer" to generate SDP offer and copy offer from text area below.</p>
  <button id="create-offer">Create Offer</button>
</div>

<label>SDP OFFER:</label>
<textarea id="offer-sdp" placeholder='User 2, paste SDP offer here...'></textarea>

<div class="step">
  <p><strong>Step 2:</strong> User 2, paste SDP offer generated by user 1 into text area above, then  click "Create Answer" to generate SDP answer and copy the answer from the text area below.</p>
  <button id="create-answer">Create answer</button>
</div>


<label>SDP Answer:</label>
<textarea id="answer-sdp" placeholder="User 1, paste SDP answer here..."></textarea>

<div class="step">
  <p><strong>Step 3:</strong> User 1, paste SDP offer generated by user 2 into text area above and then click "Add Answer"</p>
  <button id="add-answer">Add answer</button>
</div>

</div>

<div>
  <div class="sa-chat__main">
    <div class="sa-chat__header">
        <button type="button" class="btn btn-sa-muted sa-chat__header-back">
            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left">
                <line x1="19" y1="12" x2="5" y2="12"></line>
                <polyline points="12 19 5 12 12 5"></polyline>
            </svg>
        </button>
        <div class="sa-chat__header-avatar sa-symbol sa-symbol--status--online sa-symbol--shape--circle">
            <img src="assets/images/customers/customer-2-64x64.jpg" width="64" height="64" alt="">
            <div class="sa-symbol__status"></div>
        </div>
        <div class="sa-chat__header-info">
            <div class="sa-chat__header-title">Adam Taylor</div>
            <div class="sa-chat__header-meta">Last seen 7 days ago</div>
        </div>
        <div class="sa-chat__header-actions">
            <button type="button" class="btn btn-sa-muted btn-sa-icon fs-exact-20" data-bs-toggle="tooltip" title="" data-bs-original-title="Call">
                <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-phone">
                    <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                </svg>
            </button>
            <button type="button" class="btn btn-sa-muted btn-sa-icon fs-exact-20" data-bs-toggle="tooltip" title="" data-bs-original-title="More">
                <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-vertical">
                    <circle cx="12" cy="12" r="1"></circle>
                    <circle cx="12" cy="5" r="1"></circle>
                    <circle cx="12" cy="19" r="1"></circle>
                </svg>
            </button>
        </div>
    </div>
    <div class="sa-chat__messages">
      <div *ngFor="let message of messages" style="height: auto; display: block;">
        <div *ngIf="message.ownerId != socket.id; else elseBlock " class="sa-chat__message sa-chat__message--opposite">
            <div class="sa-chat__message-avatar">
                <div class="sa-symbol sa-symbol--shape--circle">
                    <img src="assets/images/customers/customer-2-64x64.jpg" width="64" height="64" alt="">
                </div>
            </div>
            <div class="sa-chat__message-parts">
                <div class="sa-chat__message-part dropdown">
                    <div class="sa-chat__message-text">{{message.message}}</div>
                    <button class="sa-chat__message-actions" data-bs-toggle="dropdown" aria-expanded="false" aria-label="More">
                        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-vertical">
                            <circle cx="12" cy="12" r="1"></circle>
                            <circle cx="12" cy="5" r="1"></circle>
                            <circle cx="12" cy="19" r="1"></circle>
                        </svg>
                    </button>
                    <ul class="dropdown-menu" aria-label="Chat message context menu">
                        <li><a class="dropdown-item" href="#">Reply</a></li>
                        <li><a class="dropdown-item" href="#">Copy Text</a></li>
                        <li><a class="dropdown-item" href="#">Forward Message</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item text-danger" href="#">Delete</a></li>
                    </ul>
                </div>

            </div>
            <div class="sa-chat__message-time">Adam Taylor – 18:46</div>
        </div>
        <ng-template #elseBlock>
          <div class="sa-chat__message">
            <div class="sa-chat__message-avatar">
                <div class="sa-symbol sa-symbol--shape--circle">
                    <img src="assets/images/customers/customer-4-64x64.jpg" width="64" height="64" alt="">
                </div>
            </div>
            <div class="sa-chat__message-parts">
                <div class="sa-chat__message-part dropdown">
                    <div class="sa-chat__message-text">{{message.message}}</div>
                    <button class="sa-chat__message-actions" data-bs-toggle="dropdown" aria-expanded="false" aria-label="More">
                        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-vertical">
                            <circle cx="12" cy="12" r="1"></circle>
                            <circle cx="12" cy="5" r="1"></circle>
                            <circle cx="12" cy="19" r="1"></circle>
                        </svg>
                    </button>
                    <ul class="dropdown-menu" aria-label="Chat message context menu">
                        <li><a class="dropdown-item" href="#">Reply</a></li>
                        <li><a class="dropdown-item" href="#">Copy Text</a></li>
                        <li><a class="dropdown-item" href="#">Forward Message</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item text-danger" href="#">Delete</a></li>
                    </ul>
                </div>
            </div>
            <div class="sa-chat__message-time">Ryan Ford – 18:46 - Delivered</div>
        </div>
        </ng-template>
      </div>

    </div>
    <form class="sa-chat__form d-flex">
        <input type="text" placeholder="message" #message (keyup)="onKey(message.value)"  class="form-control">
        <button class="btn btn-primary ms-3" (click)="sendMessage($event)">Send</button>
    </form>
</div>
</div>

</div>
